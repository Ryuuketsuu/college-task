<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Traffic Light</title>
  <style>
    .traffic-light{
      display: flex;
      flex-direction: row;
      margin: 10px;
    }

    .light{
      height: 30px;
      width: 30px;
      border-radius: 50%;
      border: 2px solid black;
    }

    .red{ background-color: red;}
    .yellow{ background-color: yellow;}
    .green{ background-color: green;}
  </style>
</head>
<body>
  <main>
    <section class="buttons">
      <button onclick="switchToRed()">красный</button>
      <button onclick="switchToYellow()">жёлтый</button>
      <button onclick="switchToGreen()">зелёный</button>
    </section>

    <div class="traffic-light">
      <div class="light" id="red-light"></div>
      <div class="light" id="yellow-light"></div>
      <div class="light" id="green-light"></div>
    </div>
    <p id="result"></p>
  </main>

  <script>
    //светофор для водителей запрограммирован след. образом: рабочий режим: красный - 30 сек, желтый - 5 сек, зеленый - 20 сек. Добавить кнопки принудительной смены.
    let currentLight = '';
    let redTime = 5;
    let yellowTime = 3;
    let greenTime = 4;
    let timer = 0;
    let interval = null;

    function switchToRed(){
      currentLight = 'красный';
      clearInterval(interval);
      timer = 0;
      interval = setInterval(update, 1000);
      document.getElementById('red-light').classList.add('red');
      document.getElementById('yellow-light').classList.remove('yellow');
      document.getElementById('green-light').classList.remove('green');
    }

    function switchToYellow(){
      currentLight = 'желтый';
      clearInterval(interval);
      timer = 0;
      interval = setInterval(update, 1000);
      document.getElementById('red-light').classList.remove('red');
      document.getElementById('yellow-light').classList.add('yellow');
      document.getElementById('green-light').classList.remove('green');
    }

    function switchToGreen(){
      currentLight = 'зеленый';
      clearInterval(interval);
      timer = 0;
      interval = setInterval(update, 1000);
      document.getElementById('red-light').classList.remove('red');
      document.getElementById('yellow-light').classList.remove('yellow');
      document.getElementById('green-light').classList.add('green');
    }
    
    function update(){
      if(currentLight === 'красный' && timer >= redTime){
        switchToYellow();
      } else if(currentLight === 'желтый' && timer >= yellowTime){
        switchToGreen();
      } else if (currentLight === 'зеленый' && timer >= greenTime){
        switchToRed();
      }
      timer++;

      document.getElementById('result').innerHTML = `Сейчас горит "${currentLight}" свет, таймер: ${timer}`;
      console.log(`Сейчас горит "${currentLight}" свет`);
    }

    switchToRed();
  </script>
</body>
</html>